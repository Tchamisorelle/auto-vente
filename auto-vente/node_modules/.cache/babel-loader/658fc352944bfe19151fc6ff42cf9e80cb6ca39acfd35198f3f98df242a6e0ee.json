{"ast":null,"code":"// auth-service.js\nconst API_URL = 'http://localhost:8079/SERVICE-AUTHENTIFICATION/auth';\nexport const authService = {\n  async login(credentials) {\n    try {\n      const response = await fetch(`${API_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n      if (!response.ok) {\n        const error = await response.text();\n        throw new Error(error);\n      }\n      const data = await response.json();\n\n      // Stocker le token et les informations utilisateur\n      if (data.token) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify({\n          id: data.id,\n          email: data.email,\n          role: data.role,\n          name: data.name\n        }));\n      }\n      return data;\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    }\n  }\n\n  // AuthProvider.js\n};\n\n// LoginPage.js\n// Modification de la fonction handleLogin","map":{"version":3,"names":["API_URL","authService","login","credentials","response","fetch","method","headers","body","JSON","stringify","ok","error","text","Error","data","json","token","localStorage","setItem","id","email","role","name","console"],"sources":["/home/sorelle/Fontend-sale-vehicule/auto-vente/src/services/auth-service.js"],"sourcesContent":["// auth-service.js\nconst API_URL = 'http://localhost:8079/SERVICE-AUTHENTIFICATION/auth';\n\nexport const authService = {\n  async login(credentials) {\n    try {\n      const response = await fetch(`${API_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(credentials),\n      });\n\n      if (!response.ok) {\n        const error = await response.text();\n        throw new Error(error);\n      }\n\n      const data = await response.json();\n      \n      // Stocker le token et les informations utilisateur\n      if (data.token) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify({\n          id: data.id,\n          email: data.email,\n          role: data.role,\n          name: data.name\n        }));\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    }\n  },\n\n  // AuthProvider.js\n}\n\n  // LoginPage.js\n  // Modification de la fonction handleLogin\n\n\n"],"mappings":"AAAA;AACA,MAAMA,OAAO,GAAG,qDAAqD;AAErE,OAAO,MAAMC,WAAW,GAAG;EACzB,MAAMC,KAAKA,CAACC,WAAW,EAAE;IACvB,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGL,OAAO,QAAQ,EAAE;QAC/CM,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,WAAW;MAClC,CAAC,CAAC;MAEF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;QAChB,MAAMC,KAAK,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;QACnC,MAAM,IAAIC,KAAK,CAACF,KAAK,CAAC;MACxB;MAEA,MAAMG,IAAI,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;;MAElC;MACA,IAAID,IAAI,CAACE,KAAK,EAAE;QACdC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,IAAI,CAACE,KAAK,CAAC;QACzCC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEV,IAAI,CAACC,SAAS,CAAC;UAC1CU,EAAE,EAAEL,IAAI,CAACK,EAAE;UACXC,KAAK,EAAEN,IAAI,CAACM,KAAK;UACjBC,IAAI,EAAEP,IAAI,CAACO,IAAI;UACfC,IAAI,EAAER,IAAI,CAACQ;QACb,CAAC,CAAC,CAAC;MACL;MAEA,OAAOR,IAAI;IACb,CAAC,CAAC,OAAOH,KAAK,EAAE;MACdY,OAAO,CAACZ,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpC,MAAMA,KAAK;IACb;EACF;;EAEA;AACF,CAAC;;AAEC;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}